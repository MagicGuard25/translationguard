(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e03aeea"],{"0a6e":function(e,t,a){},1703:function(e,t,a){},"1fac":function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("0a6e"),a("2381")},"22fa":function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("e3b3"),a("bc1b")},2381:function(e,t,a){},"23fe":function(e,t,a){"use strict";a("64d3")},"2fcb":function(e,t,a){},"3b21":function(e,t,a){"use strict";a("68ef")},"4b9e":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var l=a("23f9"),c=a("7a23"),o=a("1fba"),n=a("e5f6"),r=a("d243"),i=a("8db7"),s=a("450f"),u=a("efd9");const[d,b]=Object(o["a"])("form"),m={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:n["f"],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:n["g"],showErrorMessage:n["g"],errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var p=Object(c["defineComponent"])({name:d,props:m,emits:["submit","failed"],setup(e,{emit:t,slots:a}){const{children:l,linkChildren:o}=Object(s["useChildren"])(r["h"]),n=e=>e?l.filter(t=>e.includes(t.name)):l,d=e=>new Promise((t,a)=>{const l=[],c=n(e);c.reduce((e,t)=>e.then(()=>{if(!l.length)return t.validate().then(e=>{e&&l.push(e)})}),Promise.resolve()).then(()=>{l.length?a(l):t()})}),m=e=>new Promise((t,a)=>{const l=n(e);Promise.all(l.map(e=>e.validate())).then(e=>{e=e.filter(Boolean),e.length?a(e):t()})}),p=e=>{const t=l.find(t=>t.name===e);return t?new Promise((e,a)=>{t.validate().then(t=>{t?a(t):e()})}):Promise.reject()},f=t=>"string"===typeof t?p(t):e.validateFirst?d(t):m(t),O=e=>{"string"===typeof e&&(e=[e]);const t=n(e);t.forEach(e=>{e.resetValidation()})},g=()=>l.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),j=(e,t)=>{l.some(a=>a.name===e&&(a.$el.scrollIntoView(t),!0))},h=()=>l.reduce((e,t)=>(void 0!==t.name&&(e[t.name]=t.formValue.value),e),{}),v=()=>{const a=h();f().then(()=>t("submit",a)).catch(l=>{t("failed",{values:a,errors:l}),e.scrollToError&&l[0].name&&j(l[0].name)})},V=e=>{Object(i["e"])(e),v()};return o({props:e}),Object(u["a"])({submit:v,validate:f,getValues:h,scrollToField:j,resetValidation:O,getValidationStatus:g}),()=>{var e;return Object(c["createVNode"])("form",{class:b(),onSubmit:V},[null==(e=a.default)?void 0:e.call(a)])}}});const f=Object(l["a"])(p)},"4d75":function(e,t,a){},"5d4b":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var l=a("23f9"),c=a("7a23"),o=a("1fba"),n=a("e5f6"),r=a("d243"),i=a("9a1c");const[s,u]=Object(o["a"])("tag"),d={size:String,mark:Boolean,show:n["g"],type:Object(n["e"])("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var b=Object(c["defineComponent"])({name:s,props:d,emits:["close"],setup(e,{slots:t,emit:a}){const l=e=>{e.stopPropagation(),a("close",e)},o=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},n=()=>{var a;const{type:n,mark:s,plain:d,round:b,size:m,closeable:p}=e,f={mark:s,plain:d,round:b};m&&(f[m]=m);const O=p&&Object(c["createVNode"])(i["a"],{name:"cross",class:[u("close"),r["i"]],onClick:l},null);return Object(c["createVNode"])("span",{style:o(),class:u([f,n])},[null==(a=t.default)?void 0:a.call(t),O])};return()=>Object(c["createVNode"])(c["Transition"],{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?n():null]})}});const m=Object(l["a"])(b)},"64d3":function(e,t,a){},"69a9":function(e,t,a){"use strict";a.r(t);var l=a("2e9e"),c=(a("ec5d"),a("4b9e")),o=(a("3b21"),a("b730")),n=(a("1fac"),a("f23a")),r=(a("21a7"),a("2e1b")),i=(a("22fa"),a("5d4b")),s=(a("a3b5"),a("a136")),u=(a("4d86"),a("6c44")),d=(a("aa5a"),a("7a23")),b=a("7ded"),m=a("5f87"),p=a("0b59"),f=a("b775");const O="/app-api";function g(e){return Object(f["a"])({url:O+"/MemberCars/car-info/create",method:"post",data:e})}function j(e){return Object(f["a"])({url:O+"/MemberCars/car-info/delete?id="+e,method:"delete"})}function h(e){return Object(f["a"])({url:O+"/MemberCars/car-info/page",method:"get",params:e})}var v=a("6c43"),V=a("2849"),k=a("5502"),C={__name:"UserView",setup(e){function t(){m["e"](""),p["j"](),b["d"]().then(e=>{console.log(e),history.back()})}const a=Object(d["ref"])([]);function f(){h({pageSize:100,pageNum:1}).then(e=>{if(e&&null!=e.code&&0==e.code&&e.data&&e.data.list){a.value=e.data.list;for(let e=0;e<a.value.length;e++){let t=a.value[e].carProducts;if(t&&t.indexOf("magicSentryVIP")>-1){let l=JSON.parse(t);if(l&&l.length>0){for(let t=0;t<l.length;t++)if("magicSentryVIP"==l[t].name){let c=l[t].time,o=(new Date).getTime();if(!(o>c)){a.value[e].carMagicSentryVip=!0,a.value[e].carMagicSentryVipTime=new Date(c).toLocaleDateString().replace(/\//g,"-");break}a.value[e].carMagicSentryVip=!1}}else a.value[e].carMagicSentryVip=!1}else a.value[e].carMagicSentryVip=!1}}})}function O(e){e.carMagicSentryVip?Object(v["b"])("VIP车辆不能删除绑定！"):Object(V["a"])({title:"确定要删除改车辆绑定吗?",confirmButtonColor:"var(--van-primary-color)",width:"320px",className:"myConfirmDialog"}).then(()=>{j(e.id).then(e=>{console.log(e),e&&null!=e.code&&0==e.code&&Object(v["b"])({message:"删除成功！",icon:"passed-o",className:"toastClass"}),f()})}).catch(()=>{})}Object(d["onMounted"])(()=>{f()});const C=Object(d["ref"])(!1),N=Object(d["ref"])({userId:1,carName:"",carVin:"",carPlate:"",carMobile:"",carModel:71,isDefault:!0});function x(){y(),C.value=!0}function y(){const e=p["a"]("getCarInfo","defnull");if(e&&"defnull"!=e){const t=JSON.parse(e);N.value={userId:1,carName:"",carVin:t.carVin,carPlate:"",carMobile:t.carMobile,carModel:t.carModel,isDefault:!0}}else N.value={userId:1,carName:"",carVin:"",carPlate:"",carMobile:"",carModel:71,isDefault:!0}}const S=Object(d["ref"])(null),w=()=>{S.value.validate().then(e=>{C.value=!1,g(N.value).then(e=>{console.log(e),e&&null!=e.code&&0==e.code&&(null!=e.data&&(-998==e.data?Object(v["b"])({message:"绑定车辆数量超过3个！",icon:"warning-o",className:"toastClass"}):-999==e.data?Object(v["b"])({message:"已经绑定过该车辆！",icon:"warning-o",className:"toastClass"}):Object(v["b"])({message:"添加成功！",icon:"passed-o",className:"toastClass"})),f())})}).catch(e=>{Object(v["b"])("请正确填写内容！"),C.value=!0})},B=Object(k["b"])(),P=Object(d["computed"])(()=>B.state.appGlobal.appRunningInfo.magicCoreStatus),M=()=>{N.value={}};return(e,b)=>{const m=u["a"],p=s["a"],f=i["a"],g=r["a"],j=n["a"],h=o["a"],V=c["a"],k=l["a"];return Object(d["openBlock"])(),Object(d["createElementBlock"])("main",null,[Object(d["createVNode"])(p,{inset:"",style:{"margin-top":"20px"}},{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(m,{center:"",label:e.$t("user.viewProfileLabel"),title:e.$t("user.viewProfileTitle"),"is-link":""},null,8,["label","title"]),Object(d["createVNode"])(m,{center:"",label:e.$t("user.logoutLabel"),onClick:t,"is-link":""},{title:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.$t("user.logoutButtonText")),1)]),_:1},8,["label"])]),_:1}),Object(d["createVNode"])(p,{inset:"",style:{"margin-top":"20px"}},{default:Object(d["withCtx"])(()=>[P.value?(Object(d["openBlock"])(),Object(d["createBlock"])(m,{key:0,center:"",label:e.$t("user.bindCurrentVehicleLabel"),onClick:x,"is-link":""},{title:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.$t("user.bindCurrentVehicleButtonText")),1)]),_:1},8,["label"])):(Object(d["openBlock"])(),Object(d["createBlock"])(m,{key:1,center:"",label:e.$t("user.magicCoreNotRunningLabel"),"is-link":""},{title:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.$t("user.magicCoreNotRunningButtonText")),1)]),_:1},8,["label"])),(Object(d["openBlock"])(!0),Object(d["createElementBlock"])(d["Fragment"],null,Object(d["renderList"])(a.value,(t,a)=>(Object(d["openBlock"])(),Object(d["createBlock"])(m,{key:"car:"+a,center:"",label:e.$t("user.vehiclePlateNumberLabel",{plate:t.carPlate}),"is-link":""},{title:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(t.carName),1)]),"right-icon":Object(d["withCtx"])(()=>[t.carMagicSentryVip?(Object(d["openBlock"])(),Object(d["createBlock"])(f,{key:0,style:{"margin-right":"20px"},type:"danger"},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.$t("user.vipLabel")),1)]),_:1})):Object(d["createCommentVNode"])("",!0),t.carMagicSentryVip?(Object(d["openBlock"])(),Object(d["createBlock"])(f,{key:1,style:{"margin-right":"20px"},type:"danger"},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(t.carMagicSentryVipTime),1)]),_:2},1024)):Object(d["createCommentVNode"])("",!0),Object(d["createVNode"])(g,{style:{padding:"10px 20px","margin-right":"20px"},round:"",icon:"shopping-cart-o",type:"primary",size:"small",onClick:b[0]||(b[0]=t=>Object(d["unref"])(v["b"])(e.$t("user.purchaseMembership")))},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.$t("user.membershipButtonText")),1)]),_:1}),Object(d["createVNode"])(g,{style:{padding:"10px 20px"},round:"",icon:"delete-o",type:"primary",size:"small",onClick:e=>O(t)},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.$t("user.deleteButtonText")),1)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128))]),_:1}),Object(d["createVNode"])(k,{show:C.value,"onUpdate:show":b[6]||(b[6]=e=>C.value=e),"show-cancel-button":"","confirm-button-text":e.$t("user.bindImmediatelyButtonText"),"cancel-button-text":e.$t("user.cancelButtonText"),title:e.$t("user.confirmVehicleInfoTitle"),style:{"text-align":"center"},onConfirm:w,onCancel:M},{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(V,{style:{"margin-top":"20px"},"validate-trigger":"onSubmit",ref_key:"addCarForm",ref:S},{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(p,{inset:""},{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(j,{modelValue:N.value.carName,"onUpdate:modelValue":b[1]||(b[1]=e=>N.value.carName=e),name:"vehicleName",label:e.$t("user.vehicleNameLabel"),placeholder:"$t('user.vehicleNamePlaceholder')",rules:[{required:!0,message:e.$t("user.vehicleNameRequiredMessage")}]},null,8,["modelValue","label","rules"]),Object(d["createVNode"])(j,{modelValue:N.value.carPlate,"onUpdate:modelValue":b[2]||(b[2]=e=>N.value.carPlate=e),name:"licensePlate",label:e.$t("user.licensePlateLabel"),placeholder:"$t('user.licensePlatePlaceholder')",rules:[{required:!0,message:e.$t("user.licensePlateRequiredMessage")}]},null,8,["modelValue","label","rules"]),Object(d["createVNode"])(j,{modelValue:N.value.carVin,"onUpdate:modelValue":b[3]||(b[3]=e=>N.value.carVin=e),name:"vehicleVIN",label:e.$t("user.vehicleVINLabel"),disabled:"",placeholder:"$t('user.vehicleVINPlaceholder')",rules:[{required:!0,message:e.$t("user.vehicleVINRequiredMessage")}]},null,8,["modelValue","label","rules"]),Object(d["createVNode"])(j,{modelValue:N.value.carMobile,"onUpdate:modelValue":b[4]||(b[4]=e=>N.value.carMobile=e),name:"iotCardNumber",label:e.$t("user.iotCardNumberLabel"),disabled:"",placeholder:"$t('user.iotCardNumberPlaceholder')",rules:[{required:!0,message:e.$t("user.iotCardNumberRequiredMessage")}]},null,8,["modelValue","label","rules"]),Object(d["createVNode"])(j,{name:"isDefault",label:e.$t("user.defaultVehicleLabel")},{input:Object(d["withCtx"])(()=>[Object(d["createVNode"])(h,{modelValue:N.value.isDefault,"onUpdate:modelValue":b[5]||(b[5]=e=>N.value.isDefault=e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},512)]),_:1},8,["show","confirm-button-text","cancel-button-text","title"])])}}};a("23fe");const N=C;t["default"]=N},"7a4d":function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return b}));var l=a("7a23"),c=a("1fba"),o=a("e5f6"),n=a("450f"),r=a("efd9");const[i,s]=Object(c["a"])("checkbox-group"),u={max:o["f"],shape:Object(o["e"])("round"),disabled:Boolean,iconSize:o["f"],direction:String,modelValue:Object(o["a"])(),checkedColor:String},d=Symbol(i);var b=Object(l["defineComponent"])({name:i,props:u,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{children:c,linkChildren:o}=Object(n["useChildren"])(d),i=e=>t("update:modelValue",e),u=(e={})=>{"boolean"===typeof e&&(e={checked:e});const{checked:t,skipDisabled:a}=e,l=c.filter(e=>!!e.props.bindGroup&&(e.props.disabled&&a?e.checked.value:null!=t?t:!e.checked.value)),o=l.map(e=>e.name);i(o)};return Object(l["watch"])(()=>e.modelValue,e=>t("change",e)),Object(r["a"])({toggleAll:u}),Object(n["useCustomFieldValue"])(()=>e.modelValue),o({props:e,updateValue:i}),()=>{var t;return Object(l["createVNode"])("div",{class:s([e.direction])},[null==(t=a.default)?void 0:t.call(a)])}}})},"9b7e":function(e,t,a){},a3b5:function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("9b7e")},a71a:function(e,t,a){},aa5a:function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("1a04")},b730:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var l=a("23f9"),c=a("7a23"),o=a("1fba"),n=a("fa7c"),r=a("e5f6"),i=a("7a4d"),s=a("450f"),u=a("efd9"),d=a("5aa0"),b=a("9a1c");const m={name:r["h"],disabled:Boolean,iconSize:r["f"],modelValue:r["h"],checkedColor:String,labelPosition:String,labelDisabled:Boolean};var p=Object(c["defineComponent"])({props:Object(n["a"])({},m,{bem:Object(r["d"])(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:r["g"],indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:t,slots:a}){const l=Object(c["ref"])(),o=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},n=Object(c["computed"])(()=>{if(e.parent&&e.bindGroup){const t=o("disabled")||e.disabled;if("checkbox"===e.role){const a=o("modelValue").length,l=o("max"),c=l&&a>=+l;return t||c&&!e.checked}return t}return e.disabled}),r=Object(c["computed"])(()=>o("direction")),i=Object(c["computed"])(()=>{const t=e.checkedColor||o("checkedColor");if(t&&e.checked&&!n.value)return{borderColor:t,backgroundColor:t}}),s=Object(c["computed"])(()=>e.shape||o("shape")||"round"),u=a=>{const{target:c}=a,o=l.value,r=o===c||(null==o?void 0:o.contains(c));n.value||!r&&e.labelDisabled||t("toggle"),t("click",a)},m=()=>{var t,r;const{bem:u,checked:m,indeterminate:p}=e,f=e.iconSize||o("iconSize");return Object(c["createVNode"])("div",{ref:l,class:u("icon",[s.value,{disabled:n.value,checked:m,indeterminate:p}]),style:"dot"!==s.value?{fontSize:Object(d["a"])(f)}:{width:Object(d["a"])(f),height:Object(d["a"])(f),borderColor:null==(t=i.value)?void 0:t.borderColor}},[a.icon?a.icon({checked:m,disabled:n.value}):"dot"!==s.value?Object(c["createVNode"])(b["a"],{name:p?"minus":"success",style:i.value},null):Object(c["createVNode"])("div",{class:u("icon--dot__icon"),style:{backgroundColor:null==(r=i.value)?void 0:r.backgroundColor}},null)])},p=()=>{const{checked:t}=e;if(a.default)return Object(c["createVNode"])("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[a.default({checked:t,disabled:n.value})])};return()=>{const t="left"===e.labelPosition?[p(),m()]:[m(),p()];return Object(c["createVNode"])("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},r.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:u},[t])}}});const[f,O]=Object(o["a"])("checkbox"),g=Object(n["a"])({},m,{shape:String,bindGroup:r["g"],indeterminate:{type:Boolean,default:null}});var j=Object(c["defineComponent"])({name:f,props:g,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{parent:l}=Object(s["useParent"])(i["a"]),o=t=>{const{name:a}=e,{max:c,modelValue:o}=l.props,n=o.slice();if(t){const t=c&&n.length>=+c;t||n.includes(a)||(n.push(a),e.bindGroup&&l.updateValue(n))}else{const t=n.indexOf(a);-1!==t&&(n.splice(t,1),e.bindGroup&&l.updateValue(n))}},r=Object(c["computed"])(()=>l&&e.bindGroup?-1!==l.props.modelValue.indexOf(e.name):!!e.modelValue),d=(a=!r.value)=>{l&&e.bindGroup?o(a):t("update:modelValue",a),null!==e.indeterminate&&t("change",a)};return Object(c["watch"])(()=>e.modelValue,a=>{null===e.indeterminate&&t("change",a)}),Object(u["a"])({toggle:d,props:e,checked:r}),Object(s["useCustomFieldValue"])(()=>e.modelValue),()=>Object(c["createVNode"])(p,Object(c["mergeProps"])({bem:O,role:"checkbox",parent:l,checked:r.value,onToggle:d},e),Object(n["l"])(a,["default","icon"]))}});const h=Object(l["a"])(j)},bc1b:function(e,t,a){},d4ef:function(e,t,a){},ec5d:function(e,t,a){"use strict";a("68ef"),a("d4ef"),a("cb51"),a("3743"),a("e3b3"),a("bc1b"),a("1703"),a("a71a"),a("4d75"),a("2fcb")}}]);